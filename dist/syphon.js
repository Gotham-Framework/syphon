// Generated by CoffeeScript 1.8.0
(function() {
  var Syphon,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  Syphon = (function() {
    function Syphon() {
      this._exclude = [];
      this._keep = [];
    }

    Syphon.prototype.exclude = function() {
      var to_exclude, value, _i, _len;
      to_exclude = arguments;
      if (_.isArray(to_exclude[0])) {
        to_exclude = arguments[0];
      }
      for (_i = 0, _len = to_exclude.length; _i < _len; _i++) {
        value = to_exclude[_i];
        this._exclude.push(value);
      }
      return this;
    };

    Syphon.prototype.keep = function() {
      var to_keep, value, _i, _len;
      to_keep = arguments;
      if (_.isArray(to_keep[0])) {
        to_keep = arguments[0];
      }
      for (_i = 0, _len = to_keep.length; _i < _len; _i++) {
        value = to_keep[_i];
        this._keep.push(value);
      }
      return this;
    };

    Syphon.prototype.get = function(selector) {
      var datas, datas_serialized;
      datas_serialized = $(selector).serializeArray();
      datas = {};
      _.each(datas_serialized, (function(_this) {
        return function(data) {
          var _ref;
          if (_ref = data.name, __indexOf.call(_this._exclude, _ref) < 0) {
            return datas[data.name] = data.value;
          }
        };
      })(this));
      if (!_.isEmpty(this._keep)) {
        return _.pick(datas, this._keep);
      }
      this._exclude = [];
      this._keep = [];
      return datas;
    };

    return Syphon;

  })();

  module.exports = Syphon;

}).call(this);
